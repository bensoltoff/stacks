<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Predicting with a model stack — predict.model_stack • stacks</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">

<!--optional theme-->
<link href="../tidymodels.css" rel="stylesheet">




<meta property="og:title" content="Predicting with a model stack — predict.model_stack" />
<meta property="og:description" content="Apply a model stack to create different types of predictions." />
<meta property="og:image" content="https://stacks.tidymodels.org/logo.png" />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>

  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">stacks</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of <a href="https://github.com/tidymodels">tidymodels</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.2.0.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/basics.html">Getting Started With stacks</a>
    </li>
    <li>
      <a href="../articles/classification.html">Classification Models With stacks</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/tidymodels/stacks/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Predicting with a model stack</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidymodels/stacks/blob/master/R/predict.R'><code>R/predict.R</code></a></small>
    <div class="hidden name"><code>predict.model_stack.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Apply a model stack to create different types of predictions.</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for model_stack</span>
<span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>object</span>, <span class='va'>new_data</span>, type <span class='op'>=</span> <span class='cn'>NULL</span>, members <span class='op'>=</span> <span class='cn'>FALSE</span>, opts <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>A model stack with fitted members outputted from <code><a href='fit_members.html'>fit_members()</a></code>.</p></td>
    </tr>
    <tr>
      <th>new_data</th>
      <td><p>A rectangular data object, such as a data frame.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>Format of returned predicted values—one of "numeric", "class",
or "prob". When NULL, <code><a href='https://rdrr.io/r/stats/predict.html'>predict()</a></code> will
choose an appropriate value based on the model's mode.</p></td>
    </tr>
    <tr>
      <th>members</th>
      <td><p>Logical. Whether or not to additionally return the predictions
for each of the ensemble members.</p></td>
    </tr>
    <tr>
      <th>opts</th>
      <td><p>A list of optional arguments to the underlying predict
function passed on to <a href='https://parsnip.tidymodels.org/reference/predict.model_fit.html'>parsnip::predict.model_fit</a> for each member.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments. Currently ignored.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="example-data"><a class="anchor" href="#example-data"></a>Example Data</h2>

    


<p>This package provides some resampling objects and datasets for use in examples
and vignettes derived from a study on 1212 red-eyed tree frog embryos!</p>
<p>Red-eyed tree frog (RETF) embryos can hatch earlier than their normal
7ish days if they detect potential predator threat. Researchers wanted
to determine how, and when, these tree frog embryos were able to detect
stimulus from their environment. To do so, they subjected the embryos
at varying developmental stages to "predator stimulus" by jiggling
the embryos with a blunt probe. Beforehand, though some of the embryos
were treated with gentamicin, a compound that knocks out their lateral
line (a sensory organ.) Researcher Julie Jung and her crew found that
these factors inform whether an embryo hatches prematurely or not!</p>
<p>Note that the data included with the stacks package is not necessarily
a representative or unbiased subset of the complete dataset, and is
only for demonstrative purposes.</p>
<p><code>reg_folds</code> and <code>class_folds</code> are <code>rset</code> cross-fold validation objects
from <code>rsample</code>, splitting the training data into for the regression
and classification model objects, respectively. <code>tree_frogs_reg_test</code> and
<code>tree_frogs_class_test</code> are the analogous testing sets.</p>
<p><code>reg_res_lr</code>, <code>reg_res_svm</code>, and <code>reg_res_sp</code> contain regression tuning results
for a linear regression, support vector machine, and spline model, respectively,
fitting <code>latency</code> (i.e. how long the embryos took to hatch in response
to the jiggle) in the <code>tree_frogs</code> data, using most all of the other
variables as predictors. Note that the data underlying these models is
filtered to include data only from embryos that hatched in response to
the stimulus.</p>
<p><code>class_res_rf</code> and <code>class_res_nn</code> contain multiclass classification tuning
results for a random forest and neural network classification model,
respectively, fitting <code>reflex</code> (a measure of ear function) in the
data using most all of the other variables as predictors.</p>
<p><code>log_res_rf</code> and <code>log_res_nn</code>, contain binary classification tuning results
for a random forest and neural network classification model, respectively,
fitting <code>hatched</code> (whether or not the embryos hatched in response
to the stimulus) using most all of the other variables as predictors.</p>
<p>See <code><a href='example_data.html'>?example_data</a></code> to learn more about these objects, as well as browse
the source code that generated them.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='co'># \donttest{</span></span>
<span class='r-in'><span class='co'># see the "Example Data" section above for</span></span>
<span class='r-in'><span class='co'># clarification on the data and tuning results</span></span>
<span class='r-in'><span class='co'># objects used in these examples!</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>tree_frogs_reg_test</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>tree_frogs_class_test</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># build and fit a regression model stack</span></span>
<span class='r-in'><span class='va'>reg_st</span> <span class='op'>&lt;-</span></span>
<span class='r-in'>  <span class='fu'><a href='stacks.html'>stacks</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span class='r-in'>  <span class='fu'><a href='add_candidates.html'>add_candidates</a></span><span class='op'>(</span><span class='va'>reg_res_lr</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span class='r-in'>  <span class='fu'><a href='add_candidates.html'>add_candidates</a></span><span class='op'>(</span><span class='va'>reg_res_sp</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span class='r-in'>  <span class='fu'><a href='blend_predictions.html'>blend_predictions</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span class='r-in'>  <span class='fu'><a href='fit_members.html'>fit_members</a></span><span class='op'>(</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='va'>reg_st</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> ── A stacked ensemble model ─────────────────────────────────────</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Out of 10 possible candidate members, the ensemble retained 3.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Penalty: 1e-06.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Mixture: 1.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> The 3 highest weighted members are:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 3 x 3</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   member         type       weight</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   <span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>          </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>1</span><span> reg_res_lr_1_1 linear_reg  0.356</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>2</span><span> reg_res_sp_2_1 linear_reg  0.304</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>3</span><span> reg_res_sp_8_1 linear_reg  0.260</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># predict on the tree frogs testing data</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>reg_st</span>, <span class='va'>tree_frogs_reg_test</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 143 x 1</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    .pred</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    <span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 1</span><span>  40.3</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 2</span><span> 111. </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 3</span><span>  90.5</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 4</span><span>  33.7</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 5</span><span>  75.3</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 6</span><span>  90.0</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 7</span><span> 122. </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 8</span><span>  82.4</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 9</span><span>  37.5</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>10</span><span>  77.3</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># … with 133 more rows</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># include the predictions from the members</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>reg_st</span>, <span class='va'>tree_frogs_reg_test</span>, members <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 143 x 4</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    .pred reg_res_lr_1_1 reg_res_sp_8_1 reg_res_sp_2_1</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    <span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>          </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>          </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>          </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 1</span><span>  40.3           38.0           34.3           36.9</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 2</span><span> 111.           124.           117.            98.6</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 3</span><span>  90.5           84.5           92.4           98.2</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 4</span><span>  33.7           35.3           28.0           23.8</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 5</span><span>  75.3           79.0           77.0           67.6</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 6</span><span>  90.0           83.7           92.2           97.3</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 7</span><span> 122.           118.           139.           123. </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 8</span><span>  82.4           80.0           79.2           88.0</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 9</span><span>  37.5           36.5           30.7           32.7</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>10</span><span>  77.3           79.4           78.0           72.8</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># … with 133 more rows</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># build and fit a classification model stack</span></span>
<span class='r-in'><span class='va'>class_st</span> <span class='op'>&lt;-</span></span>
<span class='r-in'>  <span class='fu'><a href='stacks.html'>stacks</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span class='r-in'>  <span class='fu'><a href='add_candidates.html'>add_candidates</a></span><span class='op'>(</span><span class='va'>class_res_nn</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span class='r-in'>  <span class='fu'><a href='add_candidates.html'>add_candidates</a></span><span class='op'>(</span><span class='va'>class_res_rf</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span class='r-in'>  <span class='fu'><a href='blend_predictions.html'>blend_predictions</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span class='r-in'>  <span class='fu'><a href='fit_members.html'>fit_members</a></span><span class='op'>(</span><span class='op'>)</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #BBBB00;'>!</span><span> </span><span style='color: #BBBB00;'>Bootstrap01: preprocessor 1/1, model 1/1: from glmnet Fortran code (error code -75); ...</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #BBBB00;'>!</span><span> </span><span style='color: #BBBB00;'>Bootstrap02: preprocessor 1/1, model 1/1: from glmnet Fortran code (error code -67); ...</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #BBBB00;'>!</span><span> </span><span style='color: #BBBB00;'>Bootstrap06: preprocessor 1/1, model 1/1: from glmnet Fortran code (error code -81); ...</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #BBBB00;'>!</span><span> </span><span style='color: #BBBB00;'>Bootstrap10: preprocessor 1/1, model 1/1: from glmnet Fortran code (error code -83); ...</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #BBBB00;'>!</span><span> </span><span style='color: #BBBB00;'>Bootstrap11: internal: No observations were detected in `truth` for level(s): 'low', ...</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #BBBB00;'>!</span><span> </span><span style='color: #BBBB00;'>Bootstrap15: preprocessor 1/1, model 1/1: from glmnet Fortran code (error code -70); ...</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #BBBB00;'>!</span><span> </span><span style='color: #BBBB00;'>Bootstrap17: preprocessor 1/1, model 1/1: from glmnet Fortran code (error code -73); ...</span></span>
<span class='r-in'> </span>
<span class='r-in'><span class='va'>class_st</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> ── A stacked ensemble model ─────────────────────────────────────</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Out of 22 possible candidate members, the ensemble retained 20.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Penalty: 1e-06.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Mixture: 1.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Across the 3 classes, there are an average of 6.67 coefficients per class.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> The 10 highest weighted member classes are:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 10 x 4</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    member                       type        weight class</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    <span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>                        </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>        </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 1</span><span> .pred_full_class_res_nn_1_1  mlp          104.  full </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 2</span><span> .pred_mid_class_res_rf_1_04  rand_forest   42.4 low  </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 3</span><span> .pred_mid_class_res_rf_1_06  rand_forest   34.9 mid  </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 4</span><span> .pred_mid_class_res_rf_1_09  rand_forest   26.6 mid  </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 5</span><span> .pred_full_class_res_rf_1_09 rand_forest   21.9 mid  </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 6</span><span> .pred_full_class_res_rf_1_04 rand_forest   16.9 low  </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 7</span><span> .pred_mid_class_res_rf_1_10  rand_forest   14.8 low  </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 8</span><span> .pred_mid_class_res_rf_1_02  rand_forest   13.8 low  </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 9</span><span> .pred_mid_class_res_rf_1_01  rand_forest   13.5 mid  </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>10</span><span> .pred_mid_class_res_rf_1_03  rand_forest   11.4 low  </span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># predict reflex, first as a class, then as</span></span>
<span class='r-in'><span class='co'># class probabilities</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>class_st</span>, <span class='va'>tree_frogs_class_test</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 303 x 1</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    .pred_class</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    <span style='color: #949494;font-style: italic;'>&lt;fct&gt;</span><span>      </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 1</span><span> low        </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 2</span><span> full       </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 3</span><span> mid        </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 4</span><span> full       </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 5</span><span> low        </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 6</span><span> full       </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 7</span><span> full       </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 8</span><span> full       </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 9</span><span> full       </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>10</span><span> low        </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># … with 293 more rows</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>class_st</span>, <span class='va'>tree_frogs_class_test</span>, type <span class='op'>=</span> <span class='st'>"prob"</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 303 x 3</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    .pred_full .pred_low   .pred_mid</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>         <span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>       </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 1</span><span>   1.00</span><span style='color: #949494;'>e</span><span>+ 0  8.37</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-12</span><span> 0.000</span><span style='text-decoration: underline;'>000</span><span>827</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 2</span><span>   9.85</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-16</span><span>  2.78</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 1</span><span> 0.722      </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 3</span><span>   5.91</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 9</span><span>  7.78</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 1</span><span> 0.222      </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 4</span><span>   3.17</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-11</span><span>  4.79</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 1</span><span> 0.521      </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 5</span><span>   1.00</span><span style='color: #949494;'>e</span><span>+ 0  8.37</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-12</span><span> 0.000</span><span style='text-decoration: underline;'>000</span><span>827</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 6</span><span>   4.57</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-25</span><span>  1.59</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 1</span><span> 0.841      </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 7</span><span>   1.59</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-20</span><span>  3.39</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 1</span><span> 0.661      </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 8</span><span>   9.24</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-14</span><span>  2.21</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 1</span><span> 0.779      </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 9</span><span>   2.71</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-16</span><span>  2.87</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 1</span><span> 0.713      </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>10</span><span>   1.00</span><span style='color: #949494;'>e</span><span>+ 0  8.37</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-12</span><span> 0.000</span><span style='text-decoration: underline;'>000</span><span>827</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># … with 293 more rows</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># returning the member predictions as well</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span></span>
<span class='r-in'>  <span class='va'>class_st</span>, </span>
<span class='r-in'>  <span class='va'>tree_frogs_class_test</span>, </span>
<span class='r-in'>  type <span class='op'>=</span> <span class='st'>"prob"</span>, </span>
<span class='r-in'>  members <span class='op'>=</span> <span class='cn'>TRUE</span></span>
<span class='r-in'><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 303 x 36</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    .pred_full .pred_low   .pred_mid .pred_low_class_res_… .pred_low_class_res_r…</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>         <span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>       </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>                 </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>                  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 1</span><span>   1.00</span><span style='color: #949494;'>e</span><span>+ 0  8.37</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-12</span><span> 0.000</span><span style='text-decoration: underline;'>000</span><span>827                 0.212                 0.043</span><span style='text-decoration: underline;'>2</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 2</span><span>   9.85</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-16</span><span>  2.78</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 1</span><span> 0.722                       0.412                 0.509 </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 3</span><span>   5.91</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 9</span><span>  7.78</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 1</span><span> 0.222                       0.451                 0.531 </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 4</span><span>   3.17</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-11</span><span>  4.79</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 1</span><span> 0.521                       0.385                 0.490 </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 5</span><span>   1.00</span><span style='color: #949494;'>e</span><span>+ 0  8.37</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-12</span><span> 0.000</span><span style='text-decoration: underline;'>000</span><span>827                 0.212                 0.043</span><span style='text-decoration: underline;'>2</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 6</span><span>   4.57</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-25</span><span>  1.59</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 1</span><span> 0.841                       0.276                 0.298 </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 7</span><span>   1.59</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-20</span><span>  3.39</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 1</span><span> 0.661                       0.303                 0.321 </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 8</span><span>   9.24</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-14</span><span>  2.21</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 1</span><span> 0.779                       0.451                 0.512 </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 9</span><span>   2.71</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-16</span><span>  2.87</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>- 1</span><span> 0.713                       0.404                 0.344 </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>10</span><span>   1.00</span><span style='color: #949494;'>e</span><span>+ 0  8.37</span><span style='color: #949494;'>e</span><span style='color: #BB0000;'>-12</span><span> 0.000</span><span style='text-decoration: underline;'>000</span><span>827                 0.212                 0.043</span><span style='text-decoration: underline;'>2</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># … with 293 more rows, and 31 more variables:</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_low_class_res_rf_1_10 &lt;dbl&gt;, .pred_low_class_res_rf_1_03 &lt;dbl&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_low_class_res_rf_1_02 &lt;dbl&gt;, .pred_low_class_res_rf_1_08 &lt;dbl&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_low_class_res_rf_1_07 &lt;dbl&gt;, .pred_low_class_res_rf_1_06 &lt;dbl&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_low_class_res_rf_1_09 &lt;dbl&gt;, .pred_low_class_res_rf_1_05 &lt;dbl&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_low_class_res_rf_1_01 &lt;dbl&gt;, .pred_mid_class_res_nn_1_1 &lt;dbl&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_mid_class_res_rf_1_04 &lt;dbl&gt;, .pred_mid_class_res_rf_1_10 &lt;dbl&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_mid_class_res_rf_1_03 &lt;dbl&gt;, .pred_mid_class_res_rf_1_02 &lt;dbl&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_mid_class_res_rf_1_08 &lt;dbl&gt;, .pred_mid_class_res_rf_1_07 &lt;dbl&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_mid_class_res_rf_1_06 &lt;dbl&gt;, .pred_mid_class_res_rf_1_09 &lt;dbl&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_mid_class_res_rf_1_05 &lt;dbl&gt;, .pred_mid_class_res_rf_1_01 &lt;dbl&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_full_class_res_nn_1_1 &lt;dbl&gt;, .pred_full_class_res_rf_1_04 &lt;dbl&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_full_class_res_rf_1_10 &lt;dbl&gt;, .pred_full_class_res_rf_1_03 &lt;dbl&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_full_class_res_rf_1_02 &lt;dbl&gt;, .pred_full_class_res_rf_1_08 &lt;dbl&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_full_class_res_rf_1_07 &lt;dbl&gt;, .pred_full_class_res_rf_1_06 &lt;dbl&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_full_class_res_rf_1_09 &lt;dbl&gt;, .pred_full_class_res_rf_1_05 &lt;dbl&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   .pred_full_class_res_rf_1_01 &lt;dbl&gt;</span></span>
<span class='r-in'><span class='co'># }</span></span>
<span class='r-in'></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="tidyverse">
  <p>stacks is a part of the <strong>tidymodels</strong> ecosystem, a collection of modeling packages designed with common APIs and a shared philosophy.</p>
</div>

<div class="author">
  <p>
    Developed by Simon Couch, Max Kuhn.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


